(this["webpackJsonpgroup-movie-sequel"]=this["webpackJsonpgroup-movie-sequel"]||[]).push([[0],{40:function(e,t,c){},41:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},68:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){"use strict";c.r(t);var i=c(1),a=c.n(i),s=c(29),n=c.n(s),r=c(13),o=(c(40),c(3)),l=(c(41),c(2));var u=function(){return Object(l.jsx)("div",{})},j=c(4),d=c(9),v=c.n(d),b="http://localhost:5000/";var m=function(e){var t=Object(i.useState)([]),c=Object(j.a)(t,2),a=c[0],s=c[1],n=Object(i.useState)(!0),r=Object(j.a)(n,2),o=r[0],l=r[1];return Object(i.useEffect)((function(){o&&v.a.get("".concat(b,"users/").concat(e,"/movies")).then((function(e){s(e.data),l(!1)})).catch((function(e){console.log(e)}))}),[e,o]),[a,l]};c(61);var h=function(e){var t=e.movie,c=e.toggleMovieDetails,i=e.setWatchlistMovie,a=e.setWatchlistMovieData;return Object(l.jsxs)("div",{className:"MovieItem",onClick:function(){a(t),i(!0),c(!0)},children:[Object(l.jsx)("img",{src:t.poster,alt:"Poster ".concat(t.title),className:"MovieItem__poster"}),Object(l.jsx)("div",{className:"MovieItem__info",children:Object(l.jsx)("div",{className:"MovieItem__title",children:t.title})})]})},O=c(11),f={title:"",director:"",screenwriter:"",moviecast:"",runtime:null,year:null,rating:null,poster:"",platform:"",userid:null};var x=function(e){var t=Object(i.useState)(Object(O.a)(Object(O.a)({},f),{},{userid:e})),c=Object(j.a)(t,2),a=c[0];return[function(){v.a.post("".concat(b,"users/").concat(e,"/movies"),a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},c[1]]};var g=function(){return function(e,t){v.a.delete("".concat(b,"users/").concat(e,"/movies/").concat(t)).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},p=(c(62),c(31)),_=c(32),N=c(33);var w=function(e){var t=e.toggleMovieDetails,c=e.movieData,a=e.setFetch,s=e.watchlistMovie,n=Object(o.f)().userid,r=x(n),u=Object(j.a)(r,2),d=u[0],v=u[1],b=g(),m=function(){t(!1),a(!0)};return Object(i.useEffect)((function(){c&&v(Object(O.a)({},c))}),[c,v]),Object(l.jsx)("div",{className:"MovieDetails",children:c.title?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"movie-attributes--title",children:[c.title," (",c.year,")"]}),Object(l.jsxs)("div",{className:"movie-attributes__poster-info",children:[Object(l.jsx)("img",{src:c.poster,className:"movie-attributes--poster",alt:c.title}),Object(l.jsxs)("div",{className:"movie-attributes__info",children:[Object(l.jsxs)("div",{className:"movie-attributes--imdb-and-watched",children:[Object(l.jsx)("div",{className:"movie-attributes__imdb-icon",children:Object(l.jsx)("a",{href:c.imdblink,children:Object(l.jsx)(p.a,{className:"imbd-icon"})})}),Object(l.jsxs)("div",{className:"movie-attributes movie-attributes--watched",children:[Object(l.jsx)("label",{htmlFor:"watched",className:"watched__label",children:"I have watched this"}),Object(l.jsx)("input",{type:"checkbox",id:"watched",value:c.watched})]})]}),Object(l.jsxs)("div",{className:"movie-attributes",children:[Object(l.jsx)("div",{className:"movie-attributes__category",children:"Runtime"}),c.runtime," min"]}),c.genres?Object(l.jsxs)("div",{className:"movie-attributes",children:[Object(l.jsx)("div",{className:"movie-attributes__category",children:"Genre"}),c.genres]}):"",c.director.length?Object(l.jsxs)("div",{className:"movie-attributes",children:[Object(l.jsx)("div",{className:"movie-attributes__category",children:"Director"}),c.director]}):"",c.screenwriter.length?Object(l.jsxs)("div",{className:"movie-attributes",children:[Object(l.jsx)("div",{className:"movie-attributes__category",children:"Screenwriter"}),c.screenwriter]}):"",c.moviecast?Object(l.jsxs)("div",{className:"movie-attributes",children:[Object(l.jsx)("div",{className:"movie-attributes__category",children:"Cast"}),c.moviecast]}):""]})]}),Object(l.jsx)("div",{className:"movie-overview",children:c.overview}),Object(l.jsx)("div",{className:"NewMovieInput__buttons",children:s?Object(l.jsxs)("div",{className:"delete-movie",children:[" ",Object(l.jsx)(_.a,{className:"delete-icon",onClick:function(){b(n,c.movieid),setTimeout((function(){return a(!0)}),500),t(!1)}}),Object(l.jsx)(N.a,{className:"close-icon",onClick:m})]}):Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"NewMovieInput__btn--add",onClick:function(e){return d(),setTimeout((function(){return a(!0)}),500),void t(!1)},children:"Add movie"}),Object(l.jsx)("div",{className:"NewMovieInput__btn--add NewMovieInput__btn--dismiss",onClick:m,children:"Dissmiss Movie"})]})})]}):""})},M=c(34);c(68);var S=function(e){var t=e.setMovieSearch,c=e.searchResults,a=e.selectMovie,s=e.movieSearch,n=e.toggleMovieDetails,r=e.setWatchlistMovie,o=Object(i.useState)(0),u=Object(j.a)(o,2),d=u[0],v=u[1],b=function(e){switch(e.key){case"ArrowDown":console.log(d),v((function(e){return e<c.length-1?e+1:e}));break;case"ArrowUp":v((function(e){return e?e-1:0}));break;case"Enter":n(!0),a(d),v(0),t(""),r(!1),n(!0)}},m=function(e){a(e.target.parentElement.dataset.value),v(0),t(""),r(!1),n(!0)};return Object(l.jsxs)("div",{className:"NewMovieSearch",children:[Object(l.jsx)("input",{type:"text",className:"NewMovieSearch__input",placeholder:"Add a new movie",value:s,onChange:function(e){return t(e.currentTarget.value)},onKeyDown:b}),Object(l.jsx)("button",{className:"NewMovieSearch__button",onClick:function(){return n(!0)},children:Object(l.jsx)(M.a,{size:30})}),Object(l.jsx)("div",{className:"SearchResults",children:c.length>0&&c.map((function(e,t){return Object(l.jsx)("div",{className:"SearchResult ".concat(t===d?"selected":""),index:t,"data-value":t,"data-newvalue":t,onKeyDown:b,onClick:m,children:Object(l.jsxs)("div",{className:"SearchResult__title",children:[e.title," (",e.release_date?e.release_date.slice(0,4):"",")"]})},t)})).slice(0,8)})]})},k=c(19),y=c.n(k),D=c(35);var I=function(e,t){var c=Object(i.useState)(""),a=Object(j.a)(c,2),s=a[0],n=a[1],r=Object(i.useState)(Object(O.a)(Object(O.a)({},f),{},{userid:t})),o=Object(j.a)(r,2),l=o[0],u=o[1],d="83963ffe190e07bd86c6620feb4f162a",b="https://api.themoviedb.org/3/";Object(i.useEffect)((function(){if(e.length){var t=e.split(" ").join("%20");v.a.get("".concat(b,"search/movie?api_key=").concat(d,"&language=en-US&query=").concat(t,"&include_adult=false&page=1")).then((function(e){n(e.data.results)})).catch((function(){return console.log("request failed")}))}else n("")}),[e]);var m=function(){var e=Object(D.a)(y.a.mark((function e(t){var c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(b,"movie/").concat(s[t].id,"?api_key=").concat(d,"&language=en-US"));case 3:return c=e.sent,e.next=6,v.a.get("".concat(b,"movie/").concat(s[t].id,"/credits?api_key=").concat(d,"&language=en-US"));case 6:i=e.sent,h(c.data,i.data),console.log(i.data),n(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("selected movie request failed");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,c){var i=c.crew.filter((function(e){return"Director"===e.job})),a=c.crew.filter((function(e){return"Screenplay"===e.job||"Script"===e.job||"Writer"===e.job})),s=c.cast.slice(0,3);u({title:e.title,year:e.release_date.slice(0,4),runtime:e.runtime,genres:e.genres.map((function(e){return e.name})).join(", "),overview:e.overview,director:i.map((function(e){return e.name})).join(", "),screenwriter:a.map((function(e){return e.name})).join(", "),cast:s.map((function(e){return e.name})).join(", "),imdblink:"https://www.imdb.com/title/".concat(e.imdb_id),poster:"".concat("http://image.tmdb.org/t/p/","w500/").concat(e.poster_path),watched:!1,userid:t})};return[l,s,m]};c(70);var C=function(){var e=Object(o.f)().userid,t=m(e),c=Object(j.a)(t,2),a=c[0],s=c[1],n=Object(i.useState)(!1),r=Object(j.a)(n,2),u=r[0],d=r[1],v=Object(i.useState)(""),b=Object(j.a)(v,2),O=b[0],f=b[1],x=I(O),g=Object(j.a)(x,3),p=g[0],_=g[1],N=g[2],M=Object(i.useState)(!1),k=Object(j.a)(M,2),y=k[0],D=k[1],C=Object(i.useState)({}),E=Object(j.a)(C,2),W=E[0],A=E[1];return Object(i.useEffect)((function(){s(!0)}),[e]),console.log(e),Object(l.jsxs)("div",{className:"Main",children:[u?Object(l.jsx)("div",{className:"Main__inputModal",children:Object(l.jsx)(w,{movieData:y?W:p,toggleMovieDetails:d,setFetch:s,watchlistMovie:y})}):"",Object(l.jsx)(S,{setMovieSearch:f,searchResults:_,selectMovie:N,movieSearch:O,toggleMovieDetails:d,setWatchlistMovie:D}),Object(l.jsx)("div",{className:"Main__movielist",children:a.length&&a.map((function(e,t){return Object(l.jsx)(h,{movie:e,setWatchlistMovie:D,setWatchlistMovieData:A,toggleMovieDetails:d},t)}))})]})};var E=function(){var e=Object(i.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1];return Object(i.useEffect)((function(){v.a.get("".concat(b,"users")).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[]),c};c(71);var W=function(){var e=E();return Object(l.jsxs)("div",{className:"Sidebar",children:[Object(l.jsx)("div",{className:"movie-logo",children:" "}),Object(l.jsx)("div",{className:"sidebar__navlink",children:e.map((function(e){return Object(l.jsx)("div",{className:"sidebar-user",children:Object(l.jsx)(r.b,{className:"navlink",to:String(e.userid),activeStyle:{color:"Green"},children:Object(l.jsx)("h3",{className:"Sidebar__name",children:e.name})})})}))})]})};c(72);var A=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(u,{}),Object(l.jsxs)("div",{className:"App__main-and-sidebar",children:[Object(l.jsx)(W,{}),Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:"/"}),Object(l.jsx)(o.a,{path:"/:userid",children:Object(l.jsx)(C,{})})]})]})]})};n.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(r.a,{children:Object(l.jsx)(A,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.ae8f27eb.chunk.js.map